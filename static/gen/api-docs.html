<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="common.ink - API Documentation">
    <title>API Documentation - common.ink</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <script>
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (e.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        .prose { max-width: 65ch; }
        .prose h1 { font-size: 2.25rem; font-weight: 800; margin-bottom: 1rem; color: inherit; }
        .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; color: inherit; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; color: inherit; }
        .prose p { margin-bottom: 1rem; line-height: 1.75; }
        .prose ul, .prose ol { margin-bottom: 1rem; padding-left: 1.5rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose ul { list-style-type: disc; }
        .prose ol { list-style-type: decimal; }
        .prose a { color: #3b82f6; text-decoration: underline; }
        .prose a:hover { color: #2563eb; }
        .prose code { background-color: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.875rem; }
        .dark .prose code { background-color: #374151; }
        .prose pre { background-color: #1f2937; color: #f9fafb; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin-bottom: 1rem; }
        .prose pre code { background-color: transparent; padding: 0; }
        .prose blockquote { border-left: 4px solid #3b82f6; padding-left: 1rem; margin: 1rem 0; font-style: italic; }
        .prose table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
        .prose th, .prose td { border: 1px solid #e5e7eb; padding: 0.5rem 1rem; text-align: left; }
        .dark .prose th, .dark .prose td { border-color: #374151; }
        .prose th { background-color: #f3f4f6; font-weight: 600; }
        .dark .prose th { background-color: #374151; }
        .prose strong { font-weight: 600; }
        .prose hr { border-color: #e5e7eb; margin: 2rem 0; }
        .dark .prose hr { border-color: #374151; }
    </style>
</head>
<body class="h-full bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    
    <nav class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center">
                        <svg class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <span class="ml-2 text-xl font-bold text-gray-900 dark:text-white">common.ink</span>
                    </a>
                </div>
                <div class="flex items-center">
                    <a href="/login" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 dark:focus:ring-offset-gray-800 transition-colors">
                        Sign in
                    </a>
                </div>
            </div>
        </div>
    </nav>

    
    <main class="flex-1">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <article class="prose dark:prose-invert mx-auto">
                <h1 id="api-documentation">API Documentation</h1>

<p>common.ink provides a RESTful API for programmatic access to your notes, along with MCP (Model Context Protocol) support for AI agent integration.</p>

<h2 id="authentication">Authentication</h2>

<h3 id="personal-access-tokens-pat">Personal Access Tokens (PAT)</h3>

<p>The simplest way to authenticate API requests:</p>

<ol>
<li>Go to <a href="/tokens" rel="nofollow">Tokens</a> to create a new token</li>
<li>Include the token in the <code>Authorization</code> header:</li>
</ol>

<pre><code class="language-bash">curl -H &#34;Authorization: Bearer agentnotes_pat_USER_ID_TOKEN&#34; \
  https://common.ink/api/notes
</code></pre>

<h3 id="oauth-2-1">OAuth 2.1</h3>

<p>For third-party applications, use OAuth 2.1 with PKCE:</p>

<ol>
<li>Register your client via Dynamic Client Registration (DCR)</li>
<li>Redirect users to <code>/oauth/authorize</code></li>
<li>Exchange the authorization code for tokens at <code>/oauth/token</code></li>
</ol>

<p>See the <a href="https://oauth.net/2.1/" rel="nofollow">OAuth 2.1 specification</a> for details.</p>

<h2 id="rest-api">REST API</h2>

<h3 id="base-url">Base URL</h3>

<pre><code>https://common.ink/api
</code></pre>

<h3 id="notes">Notes</h3>

<h4 id="list-notes">List Notes</h4>

<pre><code class="language-http">GET /api/notes?limit=50&amp;offset=0
</code></pre>

<p><strong>Response:</strong></p>

<pre><code class="language-json">{
  &#34;notes&#34;: [
    {
      &#34;id&#34;: &#34;note_abc123&#34;,
      &#34;title&#34;: &#34;My Note&#34;,
      &#34;content&#34;: &#34;Note content here...&#34;,
      &#34;is_public&#34;: false,
      &#34;created_at&#34;: &#34;2026-01-15T10:30:00Z&#34;,
      &#34;updated_at&#34;: &#34;2026-01-15T10:30:00Z&#34;
    }
  ],
  &#34;total_count&#34;: 42
}
</code></pre>

<h4 id="create-note">Create Note</h4>

<pre><code class="language-http">POST /api/notes
Content-Type: application/json

{
  &#34;title&#34;: &#34;New Note&#34;,
  &#34;content&#34;: &#34;Note content here...&#34;
}
</code></pre>

<p><strong>Response:</strong> <code>201 Created</code></p>

<pre><code class="language-json">{
  &#34;id&#34;: &#34;note_def456&#34;,
  &#34;title&#34;: &#34;New Note&#34;,
  &#34;content&#34;: &#34;Note content here...&#34;,
  &#34;is_public&#34;: false,
  &#34;created_at&#34;: &#34;2026-01-15T10:35:00Z&#34;,
  &#34;updated_at&#34;: &#34;2026-01-15T10:35:00Z&#34;
}
</code></pre>

<h4 id="get-note">Get Note</h4>

<pre><code class="language-http">GET /api/notes/{id}
</code></pre>

<h4 id="update-note">Update Note</h4>

<pre><code class="language-http">PUT /api/notes/{id}
Content-Type: application/json

{
  &#34;title&#34;: &#34;Updated Title&#34;,
  &#34;content&#34;: &#34;Updated content...&#34;
}
</code></pre>

<h4 id="delete-note">Delete Note</h4>

<pre><code class="language-http">DELETE /api/notes/{id}
</code></pre>

<p><strong>Response:</strong> <code>204 No Content</code></p>

<h4 id="search-notes">Search Notes</h4>

<pre><code class="language-http">POST /api/notes/search
Content-Type: application/json

{
  &#34;query&#34;: &#34;search terms&#34;
}
</code></pre>

<p>Uses FTS5 full-text search. Supports standard SQLite FTS5 query syntax.</p>

<h3 id="rate-limits">Rate Limits</h3>

<table>
<thead>
<tr>
<th>Tier</th>
<th>Requests/Minute</th>
<th>Burst</th>
</tr>
</thead>

<tbody>
<tr>
<td>Free</td>
<td>60</td>
<td>100</td>
</tr>

<tr>
<td>Paid</td>
<td>6000</td>
<td>10000</td>
</tr>
</tbody>
</table>
<p>Rate limit headers are included in all responses:</p>

<ul>
<li><code>X-RateLimit-Limit</code>: Maximum requests per window</li>
<li><code>X-RateLimit-Remaining</code>: Remaining requests in current window</li>
<li><code>X-RateLimit-Reset</code>: Unix timestamp when the window resets</li>
</ul>

<h2 id="mcp-model-context-protocol">MCP (Model Context Protocol)</h2>

<p>common.ink implements the MCP 2025-03-26 specification using Streamable HTTP transport.</p>

<h3 id="endpoint">Endpoint</h3>

<pre><code>POST /mcp
</code></pre>

<h3 id="authentication-1">Authentication</h3>

<p>Include your PAT or OAuth access token:</p>

<pre><code class="language-http">Authorization: Bearer YOUR_TOKEN
Accept: application/json, text/event-stream
Content-Type: application/json
</code></pre>

<h3 id="available-tools">Available Tools</h3>

<h4 id="notes-list">notes/list</h4>

<p>List all notes with pagination.</p>

<pre><code class="language-json">{
  &#34;jsonrpc&#34;: &#34;2.0&#34;,
  &#34;id&#34;: 1,
  &#34;method&#34;: &#34;tools/call&#34;,
  &#34;params&#34;: {
    &#34;name&#34;: &#34;notes/list&#34;,
    &#34;arguments&#34;: {
      &#34;limit&#34;: 50,
      &#34;offset&#34;: 0
    }
  }
}
</code></pre>

<h4 id="notes-create">notes/create</h4>

<p>Create a new note.</p>

<pre><code class="language-json">{
  &#34;jsonrpc&#34;: &#34;2.0&#34;,
  &#34;id&#34;: 2,
  &#34;method&#34;: &#34;tools/call&#34;,
  &#34;params&#34;: {
    &#34;name&#34;: &#34;notes/create&#34;,
    &#34;arguments&#34;: {
      &#34;title&#34;: &#34;Meeting Notes&#34;,
      &#34;content&#34;: &#34;Discussed Q1 goals...&#34;
    }
  }
}
</code></pre>

<h4 id="notes-read">notes/read</h4>

<p>Read a specific note by ID.</p>

<h4 id="notes-update">notes/update</h4>

<p>Update an existing note.</p>

<h4 id="notes-delete">notes/delete</h4>

<p>Delete a note.</p>

<h4 id="notes-search">notes/search</h4>

<p>Full-text search across all notes.</p>

<h3 id="example-session">Example Session</h3>

<pre><code class="language-bash"># Initialize session
curl -X POST https://common.ink/mcp \
  -H &#34;Authorization: Bearer YOUR_TOKEN&#34; \
  -H &#34;Content-Type: application/json&#34; \
  -H &#34;Accept: application/json, text/event-stream&#34; \
  -d &#39;{&#34;jsonrpc&#34;:&#34;2.0&#34;,&#34;method&#34;:&#34;initialize&#34;,&#34;params&#34;:{&#34;protocolVersion&#34;:&#34;2025-03-26&#34;,&#34;capabilities&#34;:{}},&#34;id&#34;:1}&#39;

# List available tools
curl -X POST https://common.ink/mcp \
  -H &#34;Authorization: Bearer YOUR_TOKEN&#34; \
  -H &#34;Content-Type: application/json&#34; \
  -H &#34;Accept: application/json&#34; \
  -d &#39;{&#34;jsonrpc&#34;:&#34;2.0&#34;,&#34;method&#34;:&#34;tools/list&#34;,&#34;id&#34;:2}&#39;
</code></pre>

<h2 id="oauth-2-1-endpoints">OAuth 2.1 Endpoints</h2>

<h3 id="well-known-metadata">Well-Known Metadata</h3>

<ul>
<li><code>GET /.well-known/oauth-authorization-server</code> - Authorization server metadata</li>
<li><code>GET /.well-known/oauth-protected-resource</code> - Protected resource metadata</li>
<li><code>GET /.well-known/jwks.json</code> - JSON Web Key Set for token verification</li>
</ul>

<h3 id="authorization">Authorization</h3>

<pre><code>GET /oauth/authorize?
  response_type=code&amp;
  client_id=CLIENT_ID&amp;
  redirect_uri=REDIRECT_URI&amp;
  scope=notes:read%20notes:write&amp;
  code_challenge=PKCE_CHALLENGE&amp;
  code_challenge_method=S256&amp;
  state=RANDOM_STATE
</code></pre>

<h3 id="token-exchange">Token Exchange</h3>

<pre><code class="language-http">POST /oauth/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&amp;
code=AUTH_CODE&amp;
redirect_uri=REDIRECT_URI&amp;
client_id=CLIENT_ID&amp;
code_verifier=PKCE_VERIFIER
</code></pre>

<h3 id="dynamic-client-registration">Dynamic Client Registration</h3>

<pre><code class="language-http">POST /oauth/register
Content-Type: application/json

{
  &#34;client_name&#34;: &#34;My AI Agent&#34;,
  &#34;redirect_uris&#34;: [&#34;https://myapp.com/callback&#34;],
  &#34;grant_types&#34;: [&#34;authorization_code&#34;, &#34;refresh_token&#34;],
  &#34;response_types&#34;: [&#34;code&#34;],
  &#34;token_endpoint_auth_method&#34;: &#34;none&#34;
}
</code></pre>

<h2 id="error-responses">Error Responses</h2>

<p>All errors return JSON:</p>

<pre><code class="language-json">{
  &#34;error&#34;: &#34;not_found&#34;,
  &#34;error_description&#34;: &#34;Note not found&#34;
}
</code></pre>

<p>Common HTTP status codes:</p>

<ul>
<li><code>400 Bad Request</code> - Invalid request parameters</li>
<li><code>401 Unauthorized</code> - Missing or invalid authentication</li>
<li><code>403 Forbidden</code> - Insufficient permissions</li>
<li><code>404 Not Found</code> - Resource not found</li>
<li><code>429 Too Many Requests</code> - Rate limit exceeded</li>
<li><code>500 Internal Server Error</code> - Server error</li>
</ul>

<h2 id="sdks-and-libraries">SDKs and Libraries</h2>

<p>Currently, no official SDKs are provided. The API follows standard REST conventions and should work with any HTTP client.</p>

<p>For MCP integration, use the official MCP SDK for your language:</p>

<ul>
<li><a href="https://github.com/modelcontextprotocol/typescript-sdk" rel="nofollow">TypeScript SDK</a></li>
<li><a href="https://github.com/modelcontextprotocol/python-sdk" rel="nofollow">Python SDK</a></li>
</ul>

<h2 id="support">Support</h2>

<p>For API support, contact: api-support@common.ink</p>

            </article>
        </div>
    </main>

    
    <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="md:flex md:items-center md:justify-between">
                <div class="flex justify-center space-x-6 md:order-2">
                    <a href="/about" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 text-sm">
                        About
                    </a>
                    <a href="/privacy" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 text-sm">
                        Privacy
                    </a>
                    <a href="/terms" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 text-sm">
                        Terms
                    </a>
                    <a href="/docs/api" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 text-sm">
                        API Docs
                    </a>
                </div>
                <div class="mt-8 md:mt-0 md:order-1">
                    <p class="text-center text-sm text-gray-600 dark:text-gray-400">
                        common.ink - Secure notes for AI agents and humans
                    </p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
